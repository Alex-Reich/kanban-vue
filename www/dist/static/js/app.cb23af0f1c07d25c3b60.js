webpackJsonp([1],{"6XdX":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("h1",[this._v("KANBAN VUE")]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App",methods:{}},i,!1,function(t){s("z7JS")},null,null).exports,a=s("/ocq"),r={name:"Home",data:function(){return{title:{title:""}}},mounted:function(){this.$store.state.user._id||b.push({name:"Login"}),this.$store.dispatch("fetchBoards",this.user)},computed:{user:function(){return this.$store.state.user},boards:function(){return this.$store.state.boards}},methods:{createBoard:function(){this.$store.dispatch("createBoard",this.title),this.title={title:""}},boardPage:function(t){this.$store.commit("setBoard",t),b.push({name:"Board"})},logout:function(){this.$store.dispatch("logout"),b.push({name:"Login"})},deleteBoard:function(t){this.$store.dispatch("deleteBoard",t)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[t.user?s("button",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t._v(" "),s("hr"),t._v(" "),s("h1",[t._v("Hello "+t._s(t.user.username))]),t._v(" "),s("hr"),t._v(" "),t._l(t.boards,function(e){return s("div",[s("button",{on:{click:function(s){t.boardPage(e)}}},[t._v(t._s(e.title))]),t._v(" "),s("button",{on:{click:function(s){t.deleteBoard(e)}}},[t._v("Delete board")])])}),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.createBoard(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title.title,expression:"title.title"}],attrs:{type:"text",name:"title",placeholder:"Board title goes here"},domProps:{value:t.title.title},on:{input:function(e){e.target.composing||t.$set(t.title,"title",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Create new board")])])],2)},staticRenderFns:[]};var c=s("VU/8")(r,u,!1,function(t){s("wUAv")},"data-v-2b522e2a",null).exports,l={name:"",mounted:function(){this.$store.state.user._id||this.$store.dispatch("authenticate")},data:function(){return{login:{email:"",password:""}}},computed:{},methods:{userLogin:function(){this.$store.dispatch("login",this.login)},switchRegister:function(){b.push({name:"Register"})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-page"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.userLogin(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.email,expression:"login.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.login.email},on:{input:function(e){e.target.composing||t.$set(t.login,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("LOGIN")])]),t._v(" "),s("button",{on:{click:t.switchRegister}},[t._v("Not a user? Click here to register")])])},staticRenderFns:[]};var p=s("VU/8")(l,d,!1,function(t){s("XCJj")},null,null).exports,m={name:"register",data:function(){return{register:{username:"",email:"",password:""}}},computed:{},methods:{userRegister:function(){this.$store.dispatch("register",this.register)},switchLogin:function(){b.push({name:"Login"})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.userRegister(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",name:"username",id:"username",placeholder:"username"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.email,expression:"register.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.register.email},on:{input:function(e){e.target.composing||t.$set(t.register,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Register")])]),t._v(" "),s("button",{on:{click:t.switchLogin}},[t._v("Already a user? Click here to login!")])])},staticRenderFns:[]};var f=s("VU/8")(m,h,!1,function(t){s("6XdX")},null,null).exports,v={name:"Board",data:function(){return{list:{title:"",parentId:""},task:{body:"",parentId:""}}},mounted:function(){this.$store.dispatch("fetchLists",this.board._id),this.$store.dispatch("fetchTasks")},computed:{user:function(){return this.$store.state.user},board:function(){return this.$store.state.board},lists:function(){return this.$store.state.lists},taskList:function(){return this.$store.state.taskList}},methods:{pageHome:function(){b.push({name:"Home"})},logout:function(){this.$store.dispatch("logout"),b.push({name:"Login"})},createList:function(){this.list.parentId=this.board._id,this.$store.dispatch("createList",this.list),console.log(this.list),this.list={title:"",parentId:""}},deleteList:function(t){this.$store.dispatch("deleteList",t)},createTask:function(t){this.task.parentId=t._id,console.log(this.task),this.$store.dispatch("createTask",this.task),this.task={body:"",parentId:""}}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Board"},[t.user?s("button",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t._v(" "),s("button",{on:{click:t.pageHome}},[t._v("Back to home")]),t._v(" "),s("hr"),t._v(" "),s("h1",[t._v(t._s(t.board.title))]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.createList(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.list.title,expression:"list.title"}],attrs:{type:"text",name:"title",placeholder:"Title goes here"},domProps:{value:t.list.title},on:{input:function(e){e.target.composing||t.$set(t.list,"title",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Add list")])]),t._v(" "),t._l(t.lists,function(e){return s("div",[s("h1",[t._v(t._s(e.title))]),t._v(" "),s("form",{key:e._id,on:{submit:function(s){s.preventDefault(),t.createTask(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.body,expression:"task.body"}],attrs:{type:"text",name:"body",placeholder:"Create a task"},domProps:{value:t.task.body},on:{input:function(e){e.target.composing||t.$set(t.task,"body",e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"submit"}},[t._v("Add Task")])]),t._v(" "),s("button",{on:{click:function(s){t.deleteList(e)}}},[t._v("Delete this list")])])}),t._v("\n    "+t._s(t.taskList)+"\n")],2)},staticRenderFns:[]};var _=s("VU/8")(v,g,!1,function(t){s("u1Vf")},null,null).exports;n.a.use(a.a);var b=new a.a({routes:[{path:"/Login",name:"Login",component:p},{path:"/",name:"Home",component:c},{path:"/Register",name:"Register",component:f},{path:"/Board",name:"Board",component:_}]}),k=s("NYxO"),w=s("mtWM"),L=s.n(w),$=!window.location.host.includes("localhost")?"//kanban--vue.herokuapp.com/":"//localhost:3000/",y=L.a.create({baseURL:$,timeout:3e3,withCredentials:!0}),B=L.a.create({baseURL:$+"auth/",timeout:3e3,withCredentials:!0});n.a.use(k.a);var x=new k.a.Store({state:{user:{},boards:[],board:{},lists:[],tasks:[],taskList:{}},mutations:{setUser:function(t,e){t.user=e},deleteUser:function(t){t.user={},t.boards=[],t.board={},t.lists=[],t.taskList={}},setBoards:function(t,e){t.boards=e},setBoard:function(t,e){t.board=e},setLists:function(t,e){t.lists=e},setTaskList:function(t,e){var s=function(t){for(var e={},s=0;s<t.length;s++){var n=t[s];e[n.parentId]?e[n.parentId].push(n):(e[n.parentId]=[],e[n.parentId].push(n))}return e}(e);t.taskList=s,console.log("got here")}},actions:{login:function(t,e){var s=t.commit;t.dispatch;B.post("/login",e).then(function(t){console.log("successfully logged in!"),s("setUser",t.data),b.push({name:"Home"})})},logout:function(t){var e=t.commit;t.dispatch;B.delete("/logout").then(function(t){console.log("Successfully logged out!"),e("deleteUser"),b.push({name:"Login"})})},register:function(t,e){t.commit,t.dispatch;B.post("/register",e).then(function(t){console.log("Registration Successful"),b.push({name:"Login"})})},authenticate:function(t){var e=t.commit;t.dispatch;y.get("/authenticate").then(function(t){e("setUser",t.data),b.push({name:"Home"})}).catch(function(t){console.log(t)})},fetchBoards:function(t,e){var s=t.commit;t.dispatch;y.get("/api/boards",e).then(function(t){s("setBoards",t.data)})},createBoard:function(t,e){t.commit;var s=t.dispatch,n=t.state;y.post("/api/boards",e).then(function(t){s("fetchBoards",n.user)})},deleteBoard:function(t,e){t.commit;var s=t.dispatch,n=t.state;y.delete("/api/boards/"+e._id,e).then(function(t){s("fetchBoards",n.user)})},createList:function(t,e){t.commit;var s=t.dispatch;y.post("/api/lists",e).then(function(t){s("fetchLists",e.parentId)})},fetchLists:function(t,e){var s=t.commit;t.dispatch;y.get("/api/lists",e).then(function(t){s("setLists",t.data)})},deleteList:function(t,e){t.commit;var s=t.dispatch;y.delete("/api/lists/"+e._id,e).then(function(t){s("fetchLists",e.parentId)})},fetchTasks:function(t){var e=t.commit;t.dispatch;y.get("/api/tasks").then(function(t){e("setTaskList",t.data)})},deleteTasks:function(t,e){t.commit;var s=t.dispatch;y.delete("/api/tasks/"+e._id,e).then(function(t){s("fetchTasks",e.parentId)})},createTask:function(t,e){t.commit;var s=t.dispatch;y.post("/api/tasks",e).then(function(t){s("fetchTasks",e.parentId)})}}});n.a.config.productionTip=!1,new n.a({el:"#app",router:b,store:x,components:{App:o},template:"<App/>"})},XCJj:function(t,e){},u1Vf:function(t,e){},wUAv:function(t,e){},z7JS:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cb23af0f1c07d25c3b60.js.map